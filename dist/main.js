(()=>{"use strict";const t={radius:20,growthAndShrinkTimes:1.25,leafNodeSpace:75,lineHeight:90,textFont:"Poppins",strokeColor:"#f56042",colorArray:[{bgColor:"#fff2e0",borderColor:"#f56042"}]},e=function(t,e,i){return`rgb(${t}, ${e}, ${i})`},i=class{constructor(t){this.currentHoveringColor="";const i=document.createElement("canvas");this.$el=t,this.$hitEl=i,this.colorGenerator=new class{constructor(){this.red=0,this.green=0,this.blue=1}incrementColor(t){this[t]=(this[t]+10)%256}getNextColor(){const t=e(this.red,this.green,this.blue);return this.incrementColor("blue"),this.blue<10&&(this.incrementColor("green"),this.green<10&&this.incrementColor("red")),t}}}clearCanvas(){const{height:t,width:e}=this.$el;this.getContext().clearRect(0,0,e,t)}setMaxWidthAndHeight(t,e){this.$hitEl.height=this.$el.height=t,this.$hitEl.width=this.$el.width=e}getHitContext(){const t=this.$hitEl.getContext("2d");if(!t)throw new Error("Cannot get 2d context");return t}getContext(){const t=this.$el.getContext("2d");if(!t)throw new Error("Cannot get 2d context");return t}getNextColor(){return this.colorGenerator.getNextColor()}onHover(t){this.$el.addEventListener("mousemove",(i=>{const{pageX:r,pageY:n}=i,{data:o}=this.getHitContext().getImageData(r-this.$el.offsetLeft,n-this.$el.offsetTop,1,1),s=e(o[0],o[1],o[2]);this.currentHoveringColor!==s&&(this.currentHoveringColor=s,t(s))}))}onClick(t){this.$el.addEventListener("click",(i=>{const{pageX:r,pageY:n}=i;console.log(r,n);const{data:o}=this.getHitContext().getImageData(r-this.$el.offsetLeft,n-this.$el.offsetTop,1,1);t(e(o[0],o[1],o[2]))}))}};var r;function n(e){return(e+2)*t.leafNodeSpace}function o(e){return e*t.leafNodeSpace}function s(e){return e*t.lineHeight}function a(t,e,i,r){const o=n(t),a=s(e+1);return{maxCanvasHeightRequired:a,maxCanvasWidthRequired:o,actualMaxHeight:a>r?a:r,actualMaxWidth:o>i?o:i}}!function(t){t[t.SIMPLE=0]="SIMPLE",t[t.PRETTY=1]="PRETTY",t[t.EXPANDABLE=2]="EXPANDABLE",t[t.HIGHLIGHT=3]="HIGHLIGHT"}(r||(r={}));const h=function(e,i,r){const{xStart:n,xEnd:o}=i,{yStart:s,yEnd:a}=r,h=(s+a)/2,c=(n+o)/2;new class{constructor(t,e,i,r,n){const{x:o,y:s}=e,{x:a,y:h}=i,{x:c,y:l}=r,{x:d,y:g}=n;this.color=t,this.xStart=o,this.yStart=s,this.cp1x=a,this.cp1y=h,this.cp2x=c,this.cp2y=l,this.xEnd=d,this.yEnd=g}draw(t){t.beginPath(),t.moveTo(this.xStart,this.yStart),t.strokeStyle=this.color,t.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.xEnd,this.yEnd),t.stroke()}}(t.strokeColor,{x:n,y:s},{x:c,y:h},{x:o,y:h},{x:o,y:a}).draw(e.getContext())};let c,l,d;function g(t,e,i,r){c&&cancelAnimationFrame(c),c=window.requestAnimationFrame((()=>{e.clearCanvas(),u(t,e,i,r)&&g(t,e,i,r)}))}function u(e,i,r,n){const{x:s,y:a}=r;let c=function(t,e,i,r){const{x:n,y:o}=i;return t.nodeCircle.setCoordinates(n,o),t.nodeCircle.draw(e)===l&&r?t.nodeCircle.grow():t.nodeCircle.restoreCircle()}(e,i,{x:s,y:a},n);e.nodeCircle.setCoordinates(s,a),e.nodeCircle.draw(i);const{left:g,right:x}=d.get(e);if(e.left){const r=d.get(e.left).left,l=a+t.lineHeight,x={x:s-o(g-r),y:l};c=u(e.left,i,x,n)||c,h(i,{xStart:s,xEnd:x.x},{yStart:a+e.nodeCircle.getRadius(),yEnd:l-e.left.nodeCircle.getRadius()})}if(e.right){const r=d.get(e.right).right,l=a+t.lineHeight,g={x:s+o(x-r),y:l};c=u(e.right,i,g,n)||c,h(i,{xStart:s,xEnd:g.x},{yStart:a+e.nodeCircle.getRadius(),yEnd:l-e.right.nodeCircle.getRadius()})}return c}function x(t){const e=t.left?x(t.left)+.5:0,i=t.right?x(t.right)+.5:0;return d.set(t,{left:e,right:i}),e+i}const f=function(t,e,r){d=new Map;const n=x(t),h=t.getHeight(),{maxHeight:c,maxWidth:u,highlightMode:f}=r,{maxCanvasWidthRequired:C,actualMaxHeight:S,actualMaxWidth:m}=a(n,h,u,c),y=d.get(t).left,w=m/2-C/2,H=new i(e);H.setMaxWidthAndHeight(S,m),H.onHover((e=>{l=e,g(t,H,{x:w+o(y+1),y:s(.5)},Boolean(f))})),g(t,H,{x:w+o(y+1),y:s(.5)},Boolean(f))};let C,S,m,y=new Map;function w(e,i,r){C&&cancelAnimationFrame(C),C=window.requestAnimationFrame((()=>function(e,i,r){const a=S.length+1,{left:h,right:c}=function(){let t=0,e=0,i=0;for(const r of S)"left"===r?i-=1:i+=1,i<0?t=Math.max(Math.abs(i),t):e=Math.max(i,e);return{left:t,right:e}}(),l=s(a+1),d=n(h+c),g=Math.max(l,r.maxHeight),u=Math.max(d,r.maxWidth),x=u/2-d/2;i.setMaxWidthAndHeight(g,u),y=new Map,function(e,i,r){let n=e,o=r,a=.5;const h=[];let c=H(e,i,[...h],{x:o,y:s(a)});for(const e of S)c=E(n,i,o,a,h)||c,"left"===e?(n=n.left,o-=.5*t.leafNodeSpace,h.push("left")):(n=n.right,o+=.5*t.leafNodeSpace,h.push("right")),a+=1;return c=E(n,i,o,a,h)||c,c}(e,i,x+o(h+1))&&w(e,i,r)}(e,i,r)))}function H(t,e,i,r){const{x:n,y:o}=r,s=Boolean(t.left||t.right);t.nodeCircle.setCoordinates(n,o);const a=t.nodeCircle.draw(e);return y.set(a,i),a===m&&s?t.nodeCircle.grow():t.nodeCircle.restoreCircle()}function E(e,i,r,n,o){const a=s(n),c=s(n+1);let l=!1;if(e.left){const n=e.left.left||e.left.right?[...o,"left"]:[...o],s=r-.5*t.leafNodeSpace;l=H(e.left,i,n,{x:s,y:c})||l,h(i,{xStart:r,xEnd:s},{yStart:a+e.nodeCircle.getRadius(),yEnd:c-e.left.nodeCircle.getRadius()})}if(e.right){const n=e.right.left||e.right.right?[...o,"right"]:[...o],s=r+.5*t.leafNodeSpace;l=H(e.right,i,n,{x:s,y:c})||l,h(i,{xStart:r,xEnd:s},{yStart:a+e.nodeCircle.getRadius(),yEnd:c-e.right.nodeCircle.getRadius()})}return l}function p(e,i,r,n){const{xStart:o,xEnd:a}=n,c=(o+a)/2,l=r*t.lineHeight;e.nodeCircle.setCoordinates(c,l),e.nodeCircle.draw(i),e.left&&(p(e.left,i,r+1,{xStart:o,xEnd:c}),h(i,{xStart:c,xEnd:(o+c)/2},{yStart:l+t.radius,yEnd:s(r+1)-t.radius})),e.right&&(p(e.right,i,r+1,{xStart:c,xEnd:a}),h(i,{xStart:c,xEnd:(c+a)/2},{yStart:l+t.radius,yEnd:s(r+1)-t.radius}))}const R=function(e,r,n){const o=e.getHeight(),s=(h=o,Math.pow(2,h-1));var h;const{maxHeight:c,maxWidth:l}=n,{maxCanvasWidthRequired:d,actualMaxHeight:g,actualMaxWidth:u}=a(s,o,l,c),x=u/2,f=x-d/2+t.leafNodeSpace,C=x+d/2-t.leafNodeSpace,S=new i(r);S.setMaxWidthAndHeight(g,u),p(e,S,.5,{xStart:f,xEnd:C})},v=function(t,e,n={}){const{type:o=r.SIMPLE,maxHeight:s=window.innerHeight,maxWidth:a=window.innerWidth}=n;switch(o){case r.PRETTY:f(t,e,{maxHeight:s,maxWidth:a});break;case r.EXPANDABLE:!function(t,e,r){const n=new i(e);S=[],n.onClick((e=>{S=y.get(e)||S,w(t,n,r)})),n.onHover((e=>{m=e,w(t,n,r)})),w(t,n,r)}(t,e,{maxHeight:s,maxWidth:a});break;case r.HIGHLIGHT:f(t,e,{maxHeight:s,maxWidth:a,highlightMode:!0});break;default:R(t,e,{maxHeight:s,maxWidth:a})}};function M(e,i,r){return r<e.length&&"null"!=e[r]&&"Null"!=e[r]&&"None"!=e[r]&&((i=new class{constructor(e){this.value=e,this.nodeCircle=new class{constructor(e,i,r){this.colorId="",this.x=-1,this.y=-1,this.value=e,this.colorSettings=r,this.radiusSettings={currentRadius:i,originalRadius:i,maxRadius:i*t.growthAndShrinkTimes,minRadius:i/t.growthAndShrinkTimes}}drawCircle(t,e,i){const{x:r,y:n}=this;t.beginPath(),t.fillStyle=i,t.arc(r,n,e,0,2*Math.PI,!1),t.fill()}drawBorder(t){const{x:e,y:i,colorSettings:r,radiusSettings:{currentRadius:n}}=this,{borderColor:o}=r;t.arc(e,i,n,0,2*Math.PI,!1),t.strokeStyle=o,t.stroke()}writeText(e){const{x:i,y:r,value:n,colorSettings:o}=this,{borderColor:s}=o;let a="10pt",h=5;n.length>3&&(a="8pt",h=3),e.fillStyle=s,e.font=`${a} ${t.textFont}`,e.textAlign="center",e.fillText(n,i,r+h)}getRadius(){const{radiusSettings:{currentRadius:t}}=this;return t}grow(t=this.radiusSettings.maxRadius){const{radiusSettings:{currentRadius:e}}=this;if(e<t){const i=e+.3;return this.radiusSettings.currentRadius=i>t?t:i,!0}return!1}shrink(t=this.radiusSettings.minRadius){const{radiusSettings:{currentRadius:e}}=this;if(e>t){const i=e-.3;return this.radiusSettings.currentRadius=i<t?t:i,!0}return!1}restoreCircle(){const{radiusSettings:{currentRadius:t,originalRadius:e}}=this;return t>e?this.shrink(e):t<e&&this.grow(e)}setColorId(t){this.colorId=t}setCoordinates(t,e){this.x=t,this.y=e}draw(t){const{radiusSettings:{currentRadius:e},colorSettings:{bgColor:i}}=this;return this.colorId=this.colorId?this.colorId:t.getNextColor(),this.drawCircle(t.getContext(),e,i),this.drawCircle(t.getHitContext(),e,this.colorId),this.drawBorder(t.getContext()),this.writeText(t.getContext()),this.colorId}}(`${e}`,t.radius,function(){const{colorArray:e}=t;return e[Math.floor(Math.random()*e.length)]}())}setLeft(t){this.left=t}setRight(t){this.right=t}getHeight(){var t,e;const i=(null===(t=this.left)||void 0===t?void 0:t.getHeight())||0,r=(null===(e=this.right)||void 0===e?void 0:e.getHeight())||0;return Math.max(i,r)+1}}(e[r])).left=M(e,i.left,2*r),i.right=M(e,i.right,2*r+1)),i}window.start=function(){var t=document.getElementById("txt").value.split(",").map((function(t){return t.trim()}));let e;console.log(t),e=M(t,e,1),v(e,document.querySelector("canvas"),{type:r.SIMPLE})}})();